CREATE TABLE CLIENTE
( IDCLIENTE NUMBER PRIMARY KEY,
  PATERNO VARCHAR(100) NOT NULL,
  MATERNO VARCHAR(100) NOT NULL,
  NOMBRE  VARCHAR(100) NOT NULL,
  DNI CHAR(8) UNIQUE,
  CLAVE VARCHAR(32) NOT NULL,
  ESTADO INTEGER DEFAULT 1 );
INSERT INTO CLIENTE VALUES ( 1 , 'TORRES' , 'SAENZ' , 'ELENA' , '73453423' , '111' , 1 );
INSERT INTO CLIENTE VALUES ( 2 , 'ALVAREZ' , 'ARANDA' , 'JUAN' , '52114785' , '112' , 1 );
INSERT INTO CLIENTE VALUES ( 3 , 'RUIZ' , 'SOLIS' , 'CARLOS' , '08547443' , '311' , 1 );
INSERT INTO CLIENTE VALUES ( 4 , 'GONZALES' , 'PEÃ‘A' , 'LUCAS' , '49228974' , '411' , 1 );
COMMIT;

CREATE SEQUENCE SQ_CLIENTE START WITH 4;

CREATE OR REPLACE PROCEDURE SP_INS_CLIENTE  
( P_CLIE IN OUT CLIENTES%ROWTYPE)  
IS

BEGIN
        INSERT INTO CLIENTE
        VALUES ( SQ_CLIENTE.NEXTVAL , P_CLIE.PATERNO , P_CLIE.MATERNO,P_CLIE.NOMBRE,P_CLIE.DNI, P_CLIE.CLAVE, P_CLIE.ESTADO )
        RETURNING IDCLIENTE INTO P_CLIE.IDCLIENTE; 
        
        IF  SQL%ROWCOUNT <> 1  THEN
            DBMS_OUTPUT.PUT_LINE (  'ERROR DE INSERCION' );
            RETURN;
        END IF;
EXCEPTION
        WHEN OTHERS THEN 
            DBMS_OUTPUT.PUT_LINE( 'ERROR : ' || SQLERRM );
END SP_INS_CLIENTE;


DECLARE
V_IDCLI CLIENTE%ROWTYPE;
BEGIN
    V_IDCLI.PATERNO:='Sanchez';
    V_IDCLI.MATERNO:='Manco';
    V_IDCLI.NOMBRE:='Hillary';
    V_IDCLI.DNI:='77072787';
    V_IDCLI.CLAVE:='12345';
    V_IDCLI.ESTADO:=1;

	PKG_CLIENTE.SP_CLIENTE( V_ID);

 SP_INS_CLIENTE( V_IDCLI ); 
 IF V_IDCLI.IDCLIENTE IS NOT NULL THEN
    --COMMIT;
    DBMS_OUTPUT.PUT_LINE( 'ID: ' || V_ID.CLIENTE_ID );
 END IF;
END;



CREATE OR REPLACE PACKAGE PKG_CLIENTE IS
    PROCEDURE SP_INS_CLIENTE ( P_CLIE IN OUT CLIENTE%ROWTYPE); 
END PKG_CLIENTE;


- CUERPO
CREATE OR REPLACE PACKAGE BODY PKG_CLIENTE IS
    PROCEDURE SP_INS_CLIENTE ( P_CLIE IN OUT CLIENTE%ROWTYPE)
    IS
    BEGIN
        INSERT INTO CLIENTE
        VALUES ( SQ_CLIENTE.NEXTVAL , P_CLIE.PATERNO , P_CLIE.MATERNO,P_CLIE.NOMBRE,P_CLIE.DNI, P_CLIE.CLAVE, P_CLIE.ESTADO )
        RETURNING IDCLIENTE INTO P_CLIE.IDCLIENTE; 
        
        IF  SQL%ROWCOUNT <> 1  THEN
            DBMS_OUTPUT.PUT_LINE (  'ERROR DE INSERCION' );
            RETURN;
        END IF;
        EXCEPTION
                WHEN OTHERS THEN 
                    DBMS_OUTPUT.PUT_LINE( 'ERROR : ' || SQLERRM );
        END SP_INS_CLIENTE;
END PKG_CLIENTE;